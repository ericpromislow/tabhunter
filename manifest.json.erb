<%# -*- Mode: javascript; indent-tab-mode: nil; js-indent-level: 2 -*- -%>
<% 
version = ENV['VERSION'] or die("tabhunter/manifest.json.erb: VERSION not set")
target = ENV['TARGET'] or die("build.sh.erb: TARGET not set") %>{
  "author": "Eric Promislow",
<% if target == 'firefox' %>
  "browser_action": {
<% else %>
  "action": {
<% end %>
<% if target == 'firefox' %>
      "browser_style": true,
<% end %>
      "default_icon": {
        "16": "icons/martini-16x16.png",
        "24": "icons/martini-24x24.png",
        "32": "icons/martini-32x32.png"
      },
    "default_title": "Tabhunter",
    "default_popup": "popup/tabhunter.html"
  },
  "commands": {
    "_execute_browser_action": {
      "suggested_key": {
        "mac": "MacCtrl+Shift+T",
        "windows": "Alt+Shift+S",
        "linux": "Ctrl+5"
      }
    }
  },
  "default_locale": "en",
  "description": "Wade through all your tabs fast",
<% if target == 'firefox' %>
    "developer": {
      "name": "Eric Promislow",
      "url": "https://github.com/ericpromislow/tabhunter"
    },
<% end %>
    "homepage_url": "https://github.com/ericpromislow/tabhunter",
  "icons": {
    "48": "icons/th-48x48.png",
    "96": "icons/th-96x96.png",
    "128": "icons/th-128x128.png"
  },
<% if target == 'firefox' %>
  "manifest_version": 2,
<% else %>
  "manifest_version": 3,
<% end %>
  "name": "Tabhunter",
  "options_ui": {
<% if target == 'firefox' %>
      "browser_style": true,
<% end %>
      "page": "popup/prefs.html"
  },
  "permissions": [
    "activeTab",
    "clipboardWrite",
    "storage",
<% if target == 'firefox' %>
    "bookmarks",
    "<all_urls>",
<% else %>
    "scripting",
<% end %>
    "tabs"
  ],
<% if target == 'chrome' %>
  "host_permissions": [
    "<all_urls>"
  ],
<% end %>
<% if target == 'firefox' %>
  "browser_specific_settings": {
    "gecko": {
      "id": "tabhunter@ericpromislow.com"
    }
  },
<% end %>
  "short_name": "Tabhunter",
  "version": "<%= version %>"
}
